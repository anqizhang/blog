<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Softly - é¢„è§ˆ</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel Standalone for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    .animate-bounce {
      animation: bounce 1s infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const Softly = () => {
      const [entries, setEntries] = useState([]);
      const [currentInput, setCurrentInput] = useState('');
      const [activeCharacter, setActiveCharacter] = useState(null);
      const [view, setView] = useState('home'); // 'home', 'add', 'insights', 'memories'
      const [shakeMemory, setShakeMemory] = useState(null);
      const [showInfo, setShowInfo] = useState(null); // æ˜¾ç¤ºè§’è‰²è¯´æ˜

      // å››ä¸ªç¥ç»é€’è´¨è§’è‰²
      const characters = {
        dopamine: {
          name: 'è¿½å…‰å…”',
          emoji: 'ğŸ°',
          color: '#FFB84D',
          lightColor: '#FFF9E6',
          personality: 'å…´å¥‹ã€æœ‰å†²åŠ²',
          quote: 'å¤ªå¥½äº†!æˆ‘åšåˆ°äº†!',
          keywords: ['å®Œæˆ', 'æˆå°±', 'ç›®æ ‡', 'ä»»åŠ¡', 'å‡èŒ', 'åŠ è–ª', 'è¿‡å…³', 'èµ¢', 'æˆåŠŸ', 'åšåˆ°', 'æå®š', 'è§£å†³', 'å‘ç°', 'å­¦ä¼š', 'è·å¾—', 'å¾—åˆ°', 'ä¹°åˆ°', 'å……ç”µ', 'å……æ»¡'],
          // ç§‘å­¦è¯´æ˜
          scienceName: 'å¤šå·´èƒº (Dopamine)',
          description: 'ä½ çš„åŠ¨åŠ›å¼•æ“å’Œå¥–åŠ±ç³»ç»Ÿ',
          details: [
            'ğŸ¯ åŠŸèƒ½: é©±åŠ¨ä½ å»è¿½æ±‚ç›®æ ‡,å®Œæˆä»»åŠ¡åç»™ä½ æ»¡è¶³æ„Ÿ',
            'âœ¨ æ„Ÿè§‰: "å¤ªå¥½äº†!æˆ‘åšåˆ°äº†!" é‚£ç§æˆå°±æ„Ÿ',
            'ğŸ”¬ æœºåˆ¶: å½“ä½ å®Œæˆä»»åŠ¡ã€è¾¾æˆç›®æ ‡ã€æˆ–å¾—åˆ°å¥–åŠ±æ—¶é‡Šæ”¾',
            'âš ï¸ æ³¨æ„: è¿‡åº¦è¿½é€å¤šå·´èƒº(åˆ·æ‰‹æœºã€è´­ç‰©æˆç˜¾)ä¼šè®©ä½ ç–²æƒ«'
          ],
          triggers: 'å®Œæˆå¾…åŠã€è¾¾æˆç›®æ ‡ã€è·å¾—è®¤å¯ã€ä¹°åˆ°æƒ³è¦çš„ä¸œè¥¿ã€å­¦ä¼šæ–°æŠ€èƒ½'
        },
        serotonin: {
          name: 'æ¸©é˜³çŒ«',
          emoji: 'ğŸ±',
          color: '#F4C430',
          lightColor: '#FFF8DC',
          personality: 'å¹³å’Œã€è‡ªè±ª',
          quote: 'æˆ‘æœ‰ä»·å€¼',
          keywords: ['è®¤å¯', 'å¤¸å¥–', 'èµç¾', 'è‡ªè±ª', 'é‡è¦', 'è´¡çŒ®', 'å¸®åŠ©', 'å°Šé‡', 'ä»·å€¼', 'æˆé•¿', 'è¿›æ­¥', 'æ™’å¤ªé˜³', 'é˜³å…‰', 'è¢«éœ€è¦'],
          scienceName: 'è¡€æ¸…ç´  (Serotonin)',
          description: 'ä½ çš„è‡ªä¿¡å’Œå°Šä¸¥æ„Ÿ',
          details: [
            'ğŸŒ åŠŸèƒ½: è®©ä½ æ„Ÿåˆ°è‡ªä¿¡ã€æœ‰ä»·å€¼ã€è¢«å°Šé‡',
            'âœ¨ æ„Ÿè§‰: "æˆ‘å¾ˆé‡è¦" "æˆ‘åšå¾—å¾ˆå¥½" çš„è‡ªè±ªæ„Ÿ',
            'ğŸ”¬ æœºåˆ¶: è¢«ä»–äººè®¤å¯ã€å¸®åŠ©ä»–äººã€å›é¡¾æˆå°±ã€æ™’å¤ªé˜³æ—¶é‡Šæ”¾',
            'ğŸ’¡ æç¤º: æŠ—æŠ‘éƒè¯ç‰©(SSRIs)å°±æ˜¯é€šè¿‡å¢åŠ è¡€æ¸…ç´ æ¥æ”¹å–„æƒ…ç»ª'
          ],
          triggers: 'è¢«å¤¸å¥–ã€å¸®åŠ©ä»–äººã€å›é¡¾è¿‡å»æˆå°±ã€æ™’å¤ªé˜³ã€è¢«å°Šé‡'
        },
        endorphin: {
          name: 'é‡Šæ”¾ç†Š',
          emoji: 'ğŸ§¸',
          color: '#FF85B3',
          lightColor: '#FFE6F0',
          personality: 'äº«å—ã€é‡Šæ”¾',
          quote: 'å¥½èˆ’æœå•Š~',
          keywords: ['è¿åŠ¨', 'è·‘æ­¥', 'æ¸¸æ³³', 'æ´—æ¾¡', 'çƒ­æ°´', 'æŒ‰æ‘©', 'æ”¾æ¾', 'èˆ’æœ', 'å¤§ç¬‘', 'éŸ³ä¹', 'å¬æ­Œ', 'å¥½å¬', 'åƒè¾£', 'ç¾é£Ÿ', 'spa', 'æ³¡æ¾¡', 'ç‘œä¼½'],
          scienceName: 'å†…å•¡è‚½ (Endorphins)',
          description: 'ä½ çš„å¤©ç„¶æ­¢ç—›è¯å’Œæ¬£å¿«æ„Ÿ',
          details: [
            'ğŸ’† åŠŸèƒ½: èº«ä½“çš„å¤©ç„¶æ­¢ç—›å‰‚,ç»™ä½ "çˆ½"çš„æ„Ÿè§‰',
            'âœ¨ æ„Ÿè§‰: è¿åŠ¨åçš„ç•…å¿«ã€çƒ­æ°´æ¾¡çš„èˆ’é€‚ã€å¤§ç¬‘çš„é‡Šæ”¾',
            'ğŸ”¬ æœºåˆ¶: è¿åŠ¨ã€å¤§ç¬‘ã€åƒè¾£ã€æŒ‰æ‘©ã€å¬éŸ³ä¹æ—¶é‡Šæ”¾',
            'ğŸƒ ç»å…¸ä¾‹å­: "è·‘æ­¥è€…çš„é«˜æ½®"(Runner\'s High)å°±æ˜¯å†…å•¡è‚½çš„ä½œç”¨'
          ],
          triggers: 'è¿åŠ¨ã€å¤§ç¬‘ã€çƒ­æ°´æ¾¡ã€æŒ‰æ‘©ã€åƒè¾£ã€å¬éŸ³ä¹æ—¶èµ·é¸¡çš®ç–™ç˜©'
        },
        oxytocin: {
          name: 'æŠ±æŠ±æ°´ç­',
          emoji: 'ğŸ¦¦',
          color: '#B19CD9',
          lightColor: '#E6E6FA',
          personality: 'æ¸©æš–ã€è¿æ¥',
          quote: 'æˆ‘ä»¬åœ¨ä¸€èµ·',
          keywords: ['æœ‹å‹', 'èŠå¤©', 'æ‹¥æŠ±', 'å®¶äºº', 'å® ç‰©', 'é™ªä¼´', 'åˆ†äº«', 'ä¸€èµ·', 'æ¸©æš–', 'æ’­å®¢', 'æ…¢æ…¢', 'å°äº‹', 'è¿æ¥', 'æ·±èŠ', 'è§†é¢‘', 'ç”µè¯', 'å›¢é˜Ÿ', 'åˆä½œ'],
          scienceName: 'å‚¬äº§ç´  (Oxytocin)',
          description: 'ä½ çš„è¿æ¥å’Œä¿¡ä»»æ¿€ç´ ',
          details: [
            'ğŸ’ åŠŸèƒ½: åˆ›é€ äººä¸äººä¹‹é—´çš„è¿æ¥ã€ä¿¡ä»»å’Œçˆ±',
            'âœ¨ æ„Ÿè§‰: "å¥½æ¸©æš–" "ä¸å­¤å•" è¢«ç†è§£çš„å®‰å…¨æ„Ÿ',
            'ğŸ”¬ æœºåˆ¶: æ‹¥æŠ±ã€æ·±åº¦å¯¹è¯ã€ç…§é¡¾ä»–äºº/å® ç‰©æ—¶é‡Šæ”¾',
            'ğŸ‘¶ è¶£é—»: ä¹Ÿå«"çˆ±çš„æ¿€ç´ ",åœ¨ç”Ÿè‚²ã€å“ºä¹³ã€äº²å¯†å…³ç³»ä¸­èµ·å…³é”®ä½œç”¨'
          ],
          triggers: 'æ‹¥æŠ±ã€æ·±åº¦èŠå¤©ã€å’Œå® ç‰©ç©ã€ç…§é¡¾ä»–äººã€å›¢é˜Ÿåˆä½œã€æ”¶åˆ°/é€å‡ºç¤¼ç‰©'
        }
      };

      // ğŸ”¥ æ•°æ®æŒä¹…åŒ–: ä» localStorage åŠ è½½æ•°æ®
      useEffect(() => {
        try {
          const savedEntries = localStorage.getItem('softly-entries');
          if (savedEntries) {
            const parsed = JSON.parse(savedEntries);
            setEntries(parsed);
            console.log('ğŸ“¥ æˆåŠŸåŠ è½½', parsed.length, 'æ¡è®°å½•');
          }
        } catch (error) {
          console.error('âŒ åŠ è½½æ•°æ®å¤±è´¥:', error);
        }
      }, []);

      // ğŸ”¥ æ•°æ®æŒä¹…åŒ–: ä¿å­˜æ•°æ®åˆ° localStorage
      useEffect(() => {
        if (entries.length > 0) {
          try {
            localStorage.setItem('softly-entries', JSON.stringify(entries));
            console.log('ğŸ’¾ å·²ä¿å­˜', entries.length, 'æ¡è®°å½•');
          } catch (error) {
            console.error('âŒ ä¿å­˜æ•°æ®å¤±è´¥:', error);
          }
        }
      }, [entries]);

      // AI åˆ†ç±»å‡½æ•°
      const classifyEntry = (text) => {
        const lowerText = text.toLowerCase();
        const scores = {};

        Object.keys(characters).forEach(type => {
          scores[type] = characters[type].keywords.filter(keyword =>
            lowerText.includes(keyword)
          ).length;
        });

        const maxScore = Math.max(...Object.values(scores));
        if (maxScore === 0) return 'dopamine'; // é»˜è®¤

        const detected = Object.keys(scores).find(type => scores[type] === maxScore);
        return detected;
      };

      // æ·»åŠ è®°å½•
      const addEntry = () => {
        if (!currentInput.trim()) return;

        const type = classifyEntry(currentInput);
        const newEntry = {
          id: Date.now(),
          text: currentInput,
          type: type,
          timestamp: new Date().toISOString(),
          date: new Date().toLocaleDateString('zh-CN')
        };

        setEntries([newEntry, ...entries]);
        setActiveCharacter(type);
        setCurrentInput('');

        setTimeout(() => {
          setView('home');
          setActiveCharacter(null);
        }, 2000);
      };

      // è®¡ç®—ç»Ÿè®¡
      const getStats = () => {
        const stats = {
          dopamine: 0,
          serotonin: 0,
          endorphin: 0,
          oxytocin: 0
        };

        entries.forEach(entry => {
          stats[entry.type]++;
        });

        const total = entries.length || 1;
        return {
          counts: stats,
          percentages: {
            dopamine: Math.round((stats.dopamine / total) * 100),
            serotonin: Math.round((stats.serotonin / total) * 100),
            endorphin: Math.round((stats.endorphin / total) * 100),
            oxytocin: Math.round((stats.oxytocin / total) * 100)
          }
        };
      };

      // æ‘‡ä¸€æ‘‡åŠŸèƒ½
      const shakeForMemory = () => {
        if (entries.length === 0) return;
        const randomEntry = entries[Math.floor(Math.random() * entries.length)];
        setShakeMemory(randomEntry);
        setTimeout(() => setShakeMemory(null), 5000);
      };

      const stats = getStats();

      // é¦–é¡µè§†å›¾
      const HomeView = () => (
        <div className="space-y-6">
          {/* è§’è‰²ä»¬çš„é—®å€™ */}
          <div className="text-center py-8">
            <div className="flex justify-center gap-4 mb-4 text-5xl">
              <button
                onClick={() => setShowInfo('dopamine')}
                className="animate-bounce hover:scale-110 transition-transform cursor-pointer"
                style={{animationDelay: '0s'}}
              >
                ğŸ°
              </button>
              <button
                onClick={() => setShowInfo('serotonin')}
                className="animate-bounce hover:scale-110 transition-transform cursor-pointer"
                style={{animationDelay: '0.1s'}}
              >
                ğŸ±
              </button>
              <button
                onClick={() => setShowInfo('endorphin')}
                className="animate-bounce hover:scale-110 transition-transform cursor-pointer"
                style={{animationDelay: '0.2s'}}
              >
                ğŸ§¸
              </button>
              <button
                onClick={() => setShowInfo('oxytocin')}
                className="animate-bounce hover:scale-110 transition-transform cursor-pointer"
                style={{animationDelay: '0.3s'}}
              >
                ğŸ¦¦
              </button>
            </div>
            <h2 className="text-2xl font-light text-gray-700 mb-2">ä½ çš„å¿«ä¹ä¼™ä¼´ä»¬åœ¨ç­‰ä½ </h2>
            <p className="text-gray-500">ä»Šå¤©æœ‰ä»€ä¹ˆè®©ä½ å¼€å¿ƒçš„å—?</p>
            <p className="text-xs text-gray-400 mt-2">ğŸ’¡ ç‚¹å‡»å°åŠ¨ç‰©äº†è§£å®ƒä»¬</p>
          </div>

          {/* å¿«é€Ÿæ“ä½œ */}
          <div className="grid grid-cols-2 gap-4">
            <button
              onClick={() => setView('add')}
              className="p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-3xl hover:shadow-lg transition-all"
            >
              <div className="text-4xl mb-2">âœ¨</div>
              <div className="font-medium text-gray-700">è®°å½•å¿«ä¹</div>
            </button>

            <button
              onClick={shakeForMemory}
              className="p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl hover:shadow-lg transition-all"
            >
              <div className="text-4xl mb-2">ğŸ²</div>
              <div className="font-medium text-gray-700">æ‘‡ä¸€æ‘‡</div>
            </button>

            <button
              onClick={() => setView('insights')}
              className="p-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-3xl hover:shadow-lg transition-all"
            >
              <div className="text-4xl mb-2">ğŸ“Š</div>
              <div className="font-medium text-gray-700">å¿«ä¹åœ°å›¾</div>
            </button>

            <button
              onClick={() => setView('memories')}
              className="p-6 bg-gradient-to-br from-green-50 to-teal-50 rounded-3xl hover:shadow-lg transition-all"
            >
              <div className="text-4xl mb-2">ğŸ’­</div>
              <div className="font-medium text-gray-700">å›å¿†å½•</div>
            </button>
          </div>

          {/* æœ€è¿‘çš„å¿«ä¹ */}
          {entries.length > 0 && (
            <div className="mt-8">
              <h3 className="text-lg font-medium text-gray-700 mb-3">æœ€è¿‘çš„å¿«ä¹æ—¶åˆ»</h3>
              <div className="space-y-2">
                {entries.slice(0, 3).map(entry => (
                  <div
                    key={entry.id}
                    className="p-4 rounded-2xl bg-white border border-gray-100 hover:shadow-md transition-all"
                    style={{borderLeftColor: characters[entry.type].color, borderLeftWidth: '4px'}}
                  >
                    <div className="flex items-start gap-3">
                      <span className="text-2xl">{characters[entry.type].emoji}</span>
                      <div className="flex-1">
                        <p className="text-gray-700">{entry.text}</p>
                        <p className="text-xs text-gray-400 mt-1">{entry.date}</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* æ‘‡ä¸€æ‘‡å¼¹çª— */}
          {shakeMemory && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-3xl p-8 max-w-md animate-bounce">
                <div className="text-center">
                  <div className="text-6xl mb-4">{characters[shakeMemory.type].emoji}</div>
                  <div className="text-sm text-gray-500 mb-2">{shakeMemory.date}</div>
                  <p className="text-lg text-gray-700 mb-4">"{shakeMemory.text}"</p>
                  <p className="text-sm text-gray-500">è¿˜è®°å¾—é‚£å¤©çš„æ„Ÿè§‰å—? âœ¨</p>
                </div>
              </div>
            </div>
          )}
        </div>
      );

      // æ·»åŠ è®°å½•è§†å›¾
      const AddView = () => (
        <div className="space-y-6">
          <button
            onClick={() => setView('home')}
            className="text-gray-500 hover:text-gray-700"
          >
            â† è¿”å›
          </button>

          <div className="text-center py-6">
            <h2 className="text-2xl font-light text-gray-700 mb-2">ä»Šå¤©ä»€ä¹ˆè®©ä½ å¼€å¿ƒ?</h2>
            <p className="text-gray-500 text-sm">æ…¢æ…¢è¯´,æˆ‘åœ¨å¬~</p>
          </div>

          <div className="space-y-4">
            <textarea
              value={currentInput}
              onChange={(e) => setCurrentInput(e.target.value)}
              placeholder="æ¯”å¦‚: æ—©ä¸Šæ´—çƒ­æ°´æ¾¡å¾ˆèˆ’æœ..."
              className="w-full p-4 rounded-2xl border-2 border-gray-200 focus:border-purple-300 focus:outline-none resize-none"
              rows="4"
            />

            <button
              onClick={addEntry}
              disabled={!currentInput.trim()}
              className="w-full py-4 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-2xl font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              è®°å½•è¿™ä¸ªæ—¶åˆ» âœ¨
            </button>
          </div>

          {/* è§’è‰²åé¦ˆ */}
          {activeCharacter && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div
                className="rounded-3xl p-8 max-w-md text-center animate-bounce"
                style={{backgroundColor: characters[activeCharacter].lightColor}}
              >
                <div className="text-7xl mb-4">{characters[activeCharacter].emoji}</div>
                <div className="text-xl font-medium mb-2" style={{color: characters[activeCharacter].color}}>
                  {characters[activeCharacter].name}
                </div>
                <p className="text-gray-700 mb-2">
                  "å¬èµ·æ¥æ˜¯æˆ‘çš„æ—¶åˆ»!"
                </p>
                <p className="text-sm text-gray-600">
                  {characters[activeCharacter].quote}
                </p>
              </div>
            </div>
          )}
        </div>
      );

      // æ´å¯Ÿè§†å›¾
      const InsightsView = () => (
        <div className="space-y-6">
          <button
            onClick={() => setView('home')}
            className="text-gray-500 hover:text-gray-700"
          >
            â† è¿”å›
          </button>

          <div className="text-center py-6">
            <h2 className="text-2xl font-light text-gray-700 mb-2">ä½ çš„å¿«ä¹åœ°å›¾</h2>
            <p className="text-gray-500 text-sm">å·²è®°å½• {entries.length} ä¸ªå¿«ä¹æ—¶åˆ»</p>
          </div>

          {entries.length === 0 ? (
            <div className="text-center py-12">
              <p className="text-gray-400">è¿˜æ²¡æœ‰è®°å½•å“¦,å¼€å§‹è®°å½•ä½ çš„ç¬¬ä¸€ä¸ªå¿«ä¹å§!</p>
            </div>
          ) : (
            <div className="space-y-6">
              {/* å››ä¸ªè§’è‰²çš„æ´»è·ƒåº¦ */}
              {Object.keys(characters).map(type => {
                const char = characters[type];
                const percentage = stats.percentages[type];
                const count = stats.counts[type];

                return (
                  <div key={type} className="space-y-2">
                    <div className="flex items-center justify-between">
                      <button
                        onClick={() => setShowInfo(type)}
                        className="flex items-center gap-3 hover:opacity-80 transition-opacity"
                      >
                        <span className="text-3xl">{char.emoji}</span>
                        <div className="text-left">
                          <div className="font-medium text-gray-700">{char.name}</div>
                          <div className="text-xs text-gray-500">{char.personality}</div>
                        </div>
                      </button>
                      <div className="text-right">
                        <div className="text-lg font-medium" style={{color: char.color}}>
                          {percentage}%
                        </div>
                        <div className="text-xs text-gray-500">{count}æ¬¡</div>
                      </div>
                    </div>

                    <div className="h-3 bg-gray-100 rounded-full overflow-hidden">
                      <div
                        className="h-full rounded-full transition-all duration-500"
                        style={{
                          width: `${percentage}%`,
                          backgroundColor: char.color
                        }}
                      />
                    </div>
                  </div>
                );
              })}

              {/* æ¸©æŸ”çš„å»ºè®® */}
              <div className="mt-8 p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-3xl">
                <h3 className="font-medium text-gray-700 mb-3">ğŸ’­ æ¸©æŸ”çš„è§‚å¯Ÿ</h3>
                {stats.percentages.dopamine > 50 && (
                  <p className="text-gray-600 text-sm leading-relaxed">
                    è¿½å…‰å…”æœ€è¿‘å¾ˆæ´»è·ƒå‘¢!ä½ åœ¨å®Œæˆå¾ˆå¤šäº‹æƒ…~ è¦ä¸è¦ä¹Ÿç»™å…¶ä»–å°ä¼™ä¼´ä¸€äº›æ—¶é—´?
                  </p>
                )}
                {stats.percentages.oxytocin < 10 && entries.length > 5 && (
                  <p className="text-gray-600 text-sm leading-relaxed">
                    æŠ±æŠ±æ°´ç­å¥½æƒ³ä½ ...è¦ä¸è¦è”ç³»ä¸€ä¸‹æœ‹å‹,æˆ–è€…ç»™å®¶äººæ‰“ä¸ªç”µè¯?
                  </p>
                )}
                {stats.percentages.endorphin < 10 && entries.length > 5 && (
                  <p className="text-gray-600 text-sm leading-relaxed">
                    é‡Šæ”¾ç†Šéœ€è¦ä½ çš„å…³æ³¨!å»è¿åŠ¨ä¸€ä¸‹,æˆ–è€…æ´—ä¸ªèˆ’æœçš„çƒ­æ°´æ¾¡å§~
                  </p>
                )}
              </div>
            </div>
          )}
        </div>
      );

      // å›å¿†å½•è§†å›¾
      const MemoriesView = () => (
        <div className="space-y-6">
          <button
            onClick={() => setView('home')}
            className="text-gray-500 hover:text-gray-700"
          >
            â† è¿”å›
          </button>

          <div className="text-center py-6">
            <h2 className="text-2xl font-light text-gray-700 mb-2">æ‰€æœ‰å¿«ä¹æ—¶åˆ»</h2>
          </div>

          {entries.length === 0 ? (
            <div className="text-center py-12">
              <div className="text-6xl mb-4">ğŸŒ±</div>
              <p className="text-gray-400">ä½ çš„å¿«ä¹èŠ±å›­ç­‰å¾…ç¬¬ä¸€æœµèŠ±ç»½æ”¾</p>
            </div>
          ) : (
            <div className="space-y-3">
              {entries.map(entry => (
                <div
                  key={entry.id}
                  className="p-5 rounded-2xl bg-white border border-gray-100 hover:shadow-lg transition-all"
                  style={{borderLeftColor: characters[entry.type].color, borderLeftWidth: '4px'}}
                >
                  <div className="flex items-start gap-4">
                    <span className="text-3xl">{characters[entry.type].emoji}</span>
                    <div className="flex-1">
                      <div className="flex items-center gap-2 mb-2">
                        <span className="font-medium" style={{color: characters[entry.type].color}}>
                          {characters[entry.type].name}
                        </span>
                        <span className="text-xs text-gray-400">{entry.date}</span>
                      </div>
                      <p className="text-gray-700 leading-relaxed">{entry.text}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      );

      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 p-6">
          <div className="max-w-2xl mx-auto">
            {/* Header */}
            <div className="text-center mb-8">
              <h1 className="text-4xl font-light text-gray-800 mb-2">Softly</h1>
              <p className="text-gray-500 text-sm">æ…¢æ…¢æ¥,è®°å½•ä½ çš„å¿«ä¹</p>
            </div>

            {/* Main Content */}
            <div className="bg-white rounded-3xl shadow-xl p-8">
              {view === 'home' && <HomeView />}
              {view === 'add' && <AddView />}
              {view === 'insights' && <InsightsView />}
              {view === 'memories' && <MemoriesView />}
            </div>

            {/* Footer */}
            <div className="text-center mt-6 text-xs text-gray-400">
              æ¸©æŸ”åœ°å¯¹å¾…è‡ªå·± Â· æ…¢æ…¢åœ°æ„Ÿå—å¿«ä¹
            </div>

            {/* è§’è‰²ä¿¡æ¯å¼¹çª— */}
            {showInfo && (
              <div
                className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"
                onClick={() => setShowInfo(null)}
              >
                <div
                  className="rounded-3xl p-8 max-w-lg w-full max-h-[80vh] overflow-y-auto"
                  style={{backgroundColor: characters[showInfo].lightColor}}
                  onClick={(e) => e.stopPropagation()}
                >
                  {/* è§’è‰²å¤´éƒ¨ */}
                  <div className="text-center mb-6">
                    <div className="text-7xl mb-3">{characters[showInfo].emoji}</div>
                    <div className="text-2xl font-medium mb-1" style={{color: characters[showInfo].color}}>
                      {characters[showInfo].name}
                    </div>
                    <div className="text-lg text-gray-600 mb-2">
                      {characters[showInfo].scienceName}
                    </div>
                    <div className="text-sm text-gray-500 italic">
                      {characters[showInfo].description}
                    </div>
                  </div>

                  {/* è¯¦ç»†è¯´æ˜ */}
                  <div className="space-y-4 mb-6">
                    {characters[showInfo].details.map((detail, index) => (
                      <div key={index} className="bg-white bg-opacity-50 rounded-2xl p-4">
                        <p className="text-sm text-gray-700 leading-relaxed">{detail}</p>
                      </div>
                    ))}
                  </div>

                  {/* è§¦å‘åœºæ™¯ */}
                  <div className="bg-white bg-opacity-50 rounded-2xl p-4 mb-6">
                    <div className="font-medium text-gray-700 mb-2 text-sm">ğŸ¯ å¦‚ä½•è§¦å‘:</div>
                    <p className="text-sm text-gray-600 leading-relaxed">
                      {characters[showInfo].triggers}
                    </p>
                  </div>

                  {/* å…³é—­æŒ‰é’® */}
                  <button
                    onClick={() => setShowInfo(null)}
                    className="w-full py-3 bg-white rounded-2xl font-medium hover:shadow-lg transition-all"
                    style={{color: characters[showInfo].color}}
                  >
                    çŸ¥é“äº† âœ¨
                  </button>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    // æ¸²æŸ“åˆ°é¡µé¢
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<Softly />);
  </script>
</body>
</html>
